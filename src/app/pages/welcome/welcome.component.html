<div class="welcome-container">
  <div class="container" [class.flipped]="isFlipped">
    <div class="section hero">
      <mat-card class="hero-body">
        <div class="header-container">
          <mat-card-header class="welcome-container">
            <div class="bio-title">
              <mat-card-title
                >Benvenuto, <br />
                Sono Andrea Ceccarelli.</mat-card-title
              >
              <mat-card-subtitle>Web Developer</mat-card-subtitle>
            </div>
          </mat-card-header>
          <div class="img-container">
            <img
              mat-card-image
              src="../../../assets/img/ritratto-removebg.png"
              alt="foto.jpg"
            />
            <div class="cornice"></div>
            <img
              class="linee-astratte"
              src="../../../assets/img/lenee-astratte-removebg.png"
              alt=""
            />

            <!-- <img src="../../../assets/img/linea.png" alt="" /> -->
          </div>
        </div>

        <div class="card-body-section-hero">
          <mat-divider class="hr" aria-hidden="true"></mat-divider>

          <!-- anello percentuale -->
          <div class="skills">
            <div class="skill-data-container" *ngFor="let skill of skills">
              <div class="skill" [style.--border-level]="skill.level + '%'">
                <div>
                  <span class="skill-name"> {{ skill.name }} </span>
                </div>
              </div>
              <p class="skill-level">{{ skill.level }}%</p>
            </div>
          </div>
        </div>
        <mat-card-actions>
          <button mat-raised-button color="primary" (click)="toggleFlip()">
            {{ isFlipped ? "Bio" : "Progetti" }}
          </button>
          <a
            mat-stroked-button
            color="primary"
            href="mailto:tuo.email@esempio.com"
            >Scrivimi</a
          >
        </mat-card-actions>
      </mat-card>
    </div>

    <div class="section projects">
      <div
        class="carousel"
        role="region"
        aria-label="Progetti in evidenza"
        *ngIf="isMobile$ | async; else desktopGrid"
      >
        <div
          #vp
          class="viewport"
          (scroll)="onScroll(vp)"
          tabindex="0"
          aria-live="polite"
        >
          <div class="slide" *ngFor="let project of projects">
            <mat-card class="card">
              <h2>I miei progetti</h2>

              <div class="card-inner" [class.flipped]="project.isFlipped">
                <div class="card-front">
                  <img
                    mat-card-image
                    [src]="project.img"
                    [alt]="project.title || 'project'"
                  />
                </div>
                <div class="card-back">
                  <mat-card-header>
                    <mat-card-title class="project-title">{{
                      project.title
                    }}</mat-card-title>
                  </mat-card-header>

                  <mat-card-content>
                    <p class="project-desc">{{ project.description }}</p>

                    <mat-chip-set
                      *ngIf="project.techs?.length"
                      class="tech-list"
                    >
                      <mat-chip *ngFor="let tech of project.techs" selected>{{
                        tech
                      }}</mat-chip>
                    </mat-chip-set>
                  </mat-card-content>
                </div>
              </div>
            </mat-card>
          </div>
        </div>
        <button
          mat-raised-button
          color="primary"
          class="project-btn-toggle"
          (click)="toggleFlip()"
        >
          {{ isFlipped ? "Bio" : "Progetti" }}
        </button>

        <!-- indicatori -->
        <div class="dots-container">
          <div class="dots" *ngIf="projects.length > 1">
            <button
              mat-icon-button
              *ngFor="let _ of projects; let i = index"
              [class.active]="i === currentIndex"
              (click)="goTo(i, vp)"
              [attr.aria-label]="'Vai alla slide ' + (i + 1)"
            >
              <span class="dot"></span>
            </button>
          </div>
        </div>
      </div>

      <!-- DESKTOP -->
      <ng-template #desktopGrid>
        <div class="projects-grid">
          <mat-card class="card" *ngFor="let project of projects">
            <div class="card-inner" [class.flipped]="project.isFlipped">
              <div class="card-front">
                <img mat-card-image [src]="project.img" alt="project.png" />
                <button
                  mat-stroked-button
                  color="primary"
                  class="flip-btn"
                  (click)="toggleCardFlip(project)"
                >
                  Info
                </button>
              </div>
              <div class="card-back">
                <mat-card-header>
                  <mat-card-title class="project-title">{{
                    project.title
                  }}</mat-card-title>
                </mat-card-header>

                <mat-card-content>
                  <p class="project-desc">
                    <span class="desc-inner" data-debug="CIAO">{{
                      project.description
                    }}</span>
                  </p>

                  <mat-chip-set *ngIf="project.techs?.length" class="tech-list">
                    <mat-chip *ngFor="let tech of project.techs" selected>{{
                      tech
                    }}</mat-chip>
                  </mat-chip-set>
                </mat-card-content>

                <button
                  mat-stroked-button
                  color="primary"
                  class="flip-btn"
                  (click)="toggleCardFlip(project)"
                >
                  Torna
                </button>
              </div>
            </div>
          </mat-card>
        </div>
      </ng-template>
    </div>
  </div>
</div>
